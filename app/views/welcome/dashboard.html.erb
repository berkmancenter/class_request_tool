<script src="js/jquery/jquery.tablesorter.min.js"></script>
<script >
  $(function() {
    $("table#sortTableExample").tablesorter({ sortList: [[1,0]] });
  });
</script>


<h3>Dashboard</h3>

<div id="dash-wrap">
  <div id="dash_widget">	
      <h4>Upcoming Classes for Your Library/Archive</h4>
        <% unless @your_repo_courses.nil? || @your_repo_courses.empty? %>
      	<table id="your-repos-table" class="table table-condensed tablesorter">
      	  <tr>
      		<th>Name</th>
      		<th>Class Date</th>
			<th>Status</th>
      		<th></th>
      	  </tr>
            <% @your_repo_courses.each do |course| %>	
            	<tr>
      	  	  <td><%= link_to(course.title, course ) %></td>
      		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
			  <td><%= course.status unless course.status.nil? %></td>
      		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %>
              <% if current_user.try(:admin?) %>
      	   		<br /><%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
          	  <% end %>
			  </td>
      	    </tr>
            <% end %>
      	</table>
  		<%= will_paginate @your_repo_courses, :param_name => 'your_repos_page' %>
        <% else %>
      	None yet!
        <% end %>
  </div>

  <div id="dash_widget">	
  <h4>Homeless Classes</h4>
  <% unless @homeless.nil? || @homeless.empty? %>
	<table id="homeless-table" class="table table-condensed tablesorter">
	<thead>	
	  <tr>
		<th>Name</th>
		<th>Submission Date</th>
		<th>Class Date</th>
		<th></th>
	  </tr>
	</thead>
	<tbody>
      <% @homeless.each do |course| %>	
      	<tr>
	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
			  <%= link_to('Add Note', course_path(course), :class => "action-edit") %><br />
			  <%= link_to('Take', take_course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
	   		<%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
    	  <% end %>
		  </td>
	    </tr>
      <% end %>
	</tbody>
	</table>
	<%= will_paginate @homeless, :param_name => 'homeless_page' %>
  <% else %>
	None yet!
  <% end %>
  </div>
</div>
<div id="dash-wrap">
  <div id="dash_widget">
  <h4>Your Claimed, Unscheduled Classes</h4>
  <% unless @your_unscheduled.nil? || @your_unscheduled.empty? %>	
    <table id="your_unscheduled-table" class="table table-condensed tablesorter">
	  <thead>
	  <tr>
		<th>Name</th>
		<th>Submission Date</th>
		<th></th>
	  </tr>
	  </thead>
	  <tbody>
    <% @your_unscheduled.each do |course| %>	
      	<tr>
	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
			  <%= link_to('Add Note', course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
	   		 <%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
      	  <% end %>
		  </td>
	    </tr>
    <% end %>
	  </tbody>
	</table>
	<%= will_paginate @your_unscheduled, :param_name => 'your_unscheduled_page' %>
  <% else %>
	None yet!
  <% end %>
  </div>

  <div id="dash_widget">  
  <h4>Unscheduled, Unclaimed Classes</h4>
    <% unless @unscheduled_unclaimed.nil? || @unscheduled_unclaimed.empty? %>
  	<table id="unassigned-table" class="table table-condensed tablesorter">
	<thead>
  	  <tr>
  		<th>Name</th>
		<th>Submission Date</th>
  		<th>Class Date</th>
  		<th></th>
  	  </tr>
    </thead> 
	<tbody>
        <% @unscheduled_unclaimed.each do |course| %>	
        	<tr>
  	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
  		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
  		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
			  <%= link_to('Add Note', course_path(course), :class => "action-edit") %><br />
	  		  <%= link_to('Take', take_course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
  	   		<%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
      	  <% end %>
		  </td>
  	    </tr>
        <% end %>
	</tbody>	
  	</table>
	<%= will_paginate @unscheduled_unclaimed, :param_name => 'unassigned_page' %>
    <% else %>
  	None yet!
    <% end %>
  </div>
</div>
<div id="dash-wrap">
  <div id="dash_widget">
  <h4>Your Scheduled, Claimed Classes</h4>
  <% unless @your_upcoming.nil? || @your_upcoming.empty? %>	
    <table id="your-upcoming-table" class="table table-condensed tablesorter">
	  <thead>
	  <tr>
		<th>Name</th>
		<th>Submission Date</th>
		<th>Class Date</th>
		<th></th>
	  </tr>
	  </thead>
	  <tbody>
    <% @your_upcoming.each do |course| %>	
      	<tr>
	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
			  <%= link_to('Add Note', course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
	   		 <%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
      	  <% end %>
		  </td>
	    </tr>
    <% end %>
	  </tbody>
	</table>
	<%= will_paginate @your_upcoming, :param_name => 'your_upcoming_page' %>
  <% else %>
	None yet!
  <% end %>
  </div>

  <div id="dash_widget">	
    <h4>Scheduled, Unclaimed Classes</h4>
      <% unless @scheduled_unclaimed.nil? || @scheduled_unclaimed.empty? %>
    	<table id="roomless-table" class="table table-condensed tablesorter">
		<thead>
    	  <tr>
    		<th>Name</th>
			<th>Submission Date</th>
    		<th>Class Date</th>
    		<th></th>
    	  </tr>
		</thead>
		<tbody>
          <% @scheduled_unclaimed.each do |course| %>	
          	<tr>
    	  	  <td><%= link_to(course.title, course ) %></td>
			  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
    		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
    		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
				  <%= link_to('Add Note', course_path(course), :class => "action-edit") %><br />
				  <%= link_to('Take', take_course_path(course), :class => "action-edit") %><br />
              <% if current_user.try(:admin?) %>
    	   		<%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
        	  <% end %>
			  </td>
    	    </tr>
          <% end %>
		</tbody>
    	</table>
		<%= will_paginate @scheduled_unclaimed, :param_name => 'roomless_page' %>
      <% else %>
    	None yet!
      <% end %>
  </div>
</div>

<div id="dash-wrap">
  <div id="dash_widget">
  <h4>Your Classes To Close</h4>
  <% unless @your_classes_to_close.nil? || @your_classes_to_close.empty? %>	
    <table id="your-upcoming-table" class="table table-condensed tablesorter">
	  <thead>
	  <tr>
		<th>Name</th>
		<th>Submission Date</th>
		<th>Class Date</th>
		<th></th>
	  </tr>
	  </thead>
	  <tbody>
    <% @your_classes_to_close.each do |course| %>	
      	<tr>
	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
		  <td><%= link_to('Edit to Close', edit_course_path(course), :class => "action-edit") %><br />
			  <%= link_to('Add Note', course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
	   		 <%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
      	  <% end %>
		  </td>
	    </tr>
    <% end %>
	  </tbody>
	</table>
	<%= will_paginate @your_classes_to_close, :param_name => 'your_classes_to_close' %>
  <% else %>
	None yet!
  <% end %>
  </div>

  <div id="dash_widget">  
  <h4><%= link_to("Your Closed Classes", "#", :id => 'collapsable') %></h4>
  <span id="your-past">
    <% unless @your_past.nil? || @your_past.empty? %>	
      <table id="your-past-table" class="table table-condensed tablesorter">
	  <thead>
  	  <tr>
  		<th>Name</th>
		<th>Submission Date</th>
  		<th>Class Date</th>
  		<th></th>
  	  </tr>
      </thead>
	  <tbody>
      <% @your_past.each do |course| %>	
        <tr>
  	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
  		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
  		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
			  <%= link_to('Add Note', course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
  	   	   <%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
          <% end %>
		  </td>
  	    </tr>
      <% end %>
	  </tbody>
  	</table>
	<%= will_paginate @your_past, :param_name => 'your_past_page' %>
    <% else %>
  	None yet!
    <% end %>
  </span>
  </div>
</div>
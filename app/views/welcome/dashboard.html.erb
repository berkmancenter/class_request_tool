<script src="js/jquery/jquery.tablesorter.min.js"></script>
<script >
  $(function() {
    $("table#sortTableExample").tablesorter({ sortList: [[1,0]] });
  });
</script>


<h1>Dashboard</h1>

<div id="dash-left" style="height: auto;">
<div style="height: 20%;">
<h3>Your Libraries/Archives</h3>
  <% unless @your_repos.nil? || @your_repos.empty? %>
	<table id="your-repos-table" class="table table-condensed tablesorter">
	  <thead>
	  <tr>
		<th>Name</th>
		<th></th>
	  </tr>
	  </thead>
	  <tbody>	
      <% @your_repos.each do |repo| %>	
        <tr>
	  	  <td><%= link_to(repo.name, repo ) %></td>
          <% if current_user.try(:admin?) %>
	        <td><%= link_to('Edit', edit_repository_path(repo), :class => "action-edit") %><br /><%= link_to('Delete', repository_path(repo), :confirm => "Are you sure?", :method => :delete) %></td>
          <% end %>
	  	</tr>
      <% end %>
	  </tbody>
    </table>
	<%= will_paginate @your_repos, :param_name => 'your_repos_page' %>
  <% else %>
	None yet!
  <% end %>
</div>
<div style="height: 20%;">
<h3>Your claimed, unscheduled</h3>
  <% unless @your_unscheduled.nil? || @your_unscheduled.empty? %>	
    <table id="your_unscheduled-table" class="table table-condensed tablesorter">
	  <thead>
	  <tr>
		<th>Name</th>
		<th>Submission Date</th>
		<th></th>
	  </tr>
	  </thead>
	  <tbody>
    <% @your_unscheduled.each do |course| %>	
      	<tr>
	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
	   		 <%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
      	  <% end %>
		  </td>
	    </tr>
    <% end %>
	  </tbody>
	</table>
	<%= will_paginate @your_unscheduled, :param_name => 'your_unscheduled_page' %>
  <% else %>
	None yet!
  <% end %>
</div>
<div style="height: 20%;">
<h3>Your scheduled, claimed</h3>
  <% unless @your_upcoming.nil? || @your_upcoming.empty? %>	
    <table id="your-upcoming-table" class="table table-condensed tablesorter">
	  <thead>
	  <tr>
		<th>Name</th>
		<th>Submission Date</th>
		<th>Class Date</th>
		<th></th>
	  </tr>
	  </thead>
	  <tbody>
    <% @your_upcoming.each do |course| %>	
      	<tr>
	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
	   		 <%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
      	  <% end %>
		  </td>
	    </tr>
    <% end %>
	  </tbody>
	</table>
	<%= will_paginate @your_upcoming, :param_name => 'your_upcoming_page' %>
  <% else %>
	None yet!
  <% end %>
</div>
<div style="height: 20%;">  
  <h3><%= link_to("Your closed", "#", :id => 'collapsable') %></h3>
  <span id="your-past">
    <% unless @your_past.nil? || @your_past.empty? %>	
      <table id="your-past-table" class="table table-condensed tablesorter">
	  <thead>
  	  <tr>
  		<th>Name</th>
		<th>Submission Date</th>
  		<th>Class Date</th>
  		<th></th>
  	  </tr>
      </thead>
	  <tbody>
      <% @your_past.each do |course| %>	
        <tr>
  	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
  		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
  		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
  	   	   <%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
          <% end %>
		  </td>
  	    </tr>
      <% end %>
	  </tbody>
  	</table>
	<%= will_paginate @your_past, :param_name => 'your_past_page' %>
    <% else %>
  	None yet!
    <% end %>
  </span>
</div>

</div>
<div id="dash-right">
	
<h3>Homeless</h3>
  <% unless @homeless.nil? || @homeless.empty? %>
	<table id="homeless-table" class="table table-condensed tablesorter">
	<thead>	
	  <tr>
		<th>Name</th>
		<th>Submission Date</th>
		<th>Class Date</th>
		<th></th>
	  </tr>
	</thead>
	<tbody>
      <% @homeless.each do |course| %>	
      	<tr>
	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
			  <%= link_to('Take', take_course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
	   		<%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
    	  <% end %>
		  </td>
	    </tr>
      <% end %>
	</tbody>
	</table>
	<%= will_paginate @homeless, :param_name => 'homeless_page' %>
  <% else %>
	None yet!
  <% end %>
  
  <h3>unscheduled, unclaimed</h3>
    <% unless @unassigned_unscheduled.nil? || @unassigned_unscheduled.empty? %>
  	<table id="unassigned-table" class="table table-condensed tablesorter">
	<thead>
  	  <tr>
  		<th>Name</th>
		<th>Submission Date</th>
  		<th>Class Date</th>
  		<th></th>
  	  </tr>
    </thead> 
	<tbody>
        <% @unassigned_unscheduled.each do |course| %>	
        	<tr>
  	  	  <td><%= link_to(course.title, course ) %></td>
		  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
  		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
  		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
	  		  <%= link_to('Take', take_course_path(course), :class => "action-edit") %><br />
          <% if current_user.try(:admin?) %>
  	   		<%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
      	  <% end %>
		  </td>
  	    </tr>
        <% end %>
	</tbody>	
  	</table>
	<%= will_paginate @unassigned_unscheduled, :param_name => 'unassigned_page' %>
    <% else %>
  	None yet!
    <% end %>
	
    <h3>scheduled, not claimed</h3>
      <% unless @scheduled_unclaimed.nil? || @scheduled_unclaimed.empty? %>
    	<table id="roomless-table" class="table table-condensed tablesorter">
		<thead>
    	  <tr>
    		<th>Name</th>
			<th>Submission Date</th>
    		<th>Class Date</th>
    		<th></th>
    	  </tr>
		</thead>
		<tbody>
          <% @scheduled_unclaimed.each do |course| %>	
          	<tr>
    	  	  <td><%= link_to(course.title, course ) %></td>
			  <td><%= course.created_at.strftime('%m/%d/%Y') %></td>
    		  <td><%= course.timeframe.strftime('%m/%d/%Y %I:%M %P') unless course.timeframe.nil? %></td>
    		  <td><%= link_to('Edit', edit_course_path(course), :class => "action-edit") %><br />
				  <%= link_to('Take', take_course_path(course), :class => "action-edit") %><br />
              <% if current_user.try(:admin?) %>
    	   		<%= link_to('Delete', course_path(course), :confirm => "Are you sure?", :method => :delete) %>
        	  <% end %>
			  </td>
    	    </tr>
          <% end %>
		</tbody>
    	</table>
		<%= will_paginate @scheduled_unclaimed, :param_name => 'roomless_page' %>
      <% else %>
    	None yet!
      <% end %>
 </div> 